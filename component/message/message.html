<div class="page-banner history-img clearfix">
	<img src="assets/img/banner_5.png" />
	<div class="banner-content">
		<h3>My</h3>
		<h2>History</h2>
		<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's</p>
	</div>
</div>
<div class="heading-design"><img src="assets/img/logo_p.png" />			
		<h3><span>Chat</span>Room</h3>
</div>	
<div class="inner-page clearfix ng-scope">
	<div class="container">
		<div class="panel-body top-msg">
			<form class="form-horizontal ng-pristine ng-valid" name="form" ng-submit="" role="form">
				<div class="chat-box ann-section clearfix" >
					<div class="col-md-3 main-chat" ng-if="vm.data.clinicDetails.length > 0">
						<div class = "main-block" >
							<div class="chat-block clearfix" ng-repeat ="data in vm.data.clinicDetails track by data.id">
								<a href class="clearfix"  >
								<div class="col-md-3 pdr prof-icon">
									<!-- <img src="assets/img/profileimg.jpg" class="img-circle" ng-if="data.image == null || data.image == ''"> -->
									<img ng-src="{{data.thumbimage}}{{data.image}}" on-error-src="assets/img/profileimg.jpg" class="img-circle" 
									ng-if="data.image != null || data.image != ''">
								</div>
								<div class="col-md-9 pdr">
									<p class="doc-name" ng-click="vm.getPatientMessage(data);vm.updateCount(data.id);data.messageCount = 0" ng-init="reciver=data.origImage+data.image"><span class="pull-left">{{data.firstName}} {{data.lastName}}</span><span class="pull-right ct-count" ng-show="data.messageCount > '0'"> {{data.messageCount}} </span></p>
									<!-- <p class="doc_desc">{{data.lastMessage}}</p> -->
								</div>
								</a>
							</div>
						</div>	
					</div>	
					<div class="chat-block clearfix"  ng-if="vm.data.clinicDetails.length == 0">
									<p class="empty-data">No Data Found</p>
						</div>
					<div class="col-md-9 clinic-msg" ng-if="vm.data.clinicinfo">
						<h4 class="msg-tit">Chat With {{vm.data.clinicinfo.firstName}} {{vm.data.clinicinfo.lastName}}</h4>
					<div  scroll-glue>
						<div>
							<ul class="user-chat clearfix">
							<ul class="user-chat clearfix">
								<li class = "clearfix" ng-class="item.senderId != vm.data.patientDetails.id ? 'user-cmd' : 'doc-cmd'" ng-repeat = "item in vm.data.messageDetails">
								<span class="chat-img">
									<img ng-src="{{vm.getSenderDetails(item.senderId,item)}}" on-error-src="assets/img/profileimg.jpg">
								</span>
								<span class="msg-content">
									<p class="clearfix" ng-if="item.type == 'message'">
										{{item.message}}
										<span class="chat-time">
											{{vm.changeDateFormat(item.created)}}
										</span>
									</p>
									<p ng-if="item.type == 'image'" class="img-dowld clearfix">
										<img data-ng-src="{{item.image}}"/>
										<span class="dowld-icon">
											<button ng-click="vm.download(item.image)"><i class="fa fa-download" aria-hidden="true"></i></button>
										</span>
										<span class="chat-time">{{vm.changeDateFormat(item.created)}}</span>
									</p>
								</span>
								</li>
							</ul>
						</div>
					</div>
					<div class="command-box clearfix">
						<div class="col-md-1 col-sm-2 ping-icon">
							<label class="myLabel">
							<input type="file" accept="image/*"  resize-max-height="100" resize-max-width="100" resize-quality="0.7" image="" onchange="angular.element(this).scope().photoChanged(this.files)" required/>
							<span class="command-i"><i class="fa fa-paperclip" aria-hidden="true" ></i></span>
							</label>
						</div>
						<div class="col-md-8 padding-zro">
							<textarea class="form-control" placeholder="Type Your Message..." ng-model="vm.data.msg"></textarea>
						</div>
						<div class="col-md-3 command-send">
							<!-- <button class="btn btn-primary" ng-click="vm.sendusSms(msg,item.mobile)">Send Us Sms</button> -->
							<a ng-click="vm.sendMessage(vm.data.msg)" class="btn btn-primary">Send</a>
						</div>
					</div>
				</div>
			</div>
			</form>			
		</div>
	</div>
</div>
<script type="text/ng-template" id="firstDialog" >
        <div class="ngdialog-message photo-send">
            <h3 class="pp-tit">Send Image</h3>
      		<div class="inner-popup">
      			<div class="progress" ng-if="sample != 0">
      				<div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:{{sample}}%">
      					{{sample}}%ofcomplete	
      				</div>
      			</div>
        		<img ng-src="{{ image }}" class="msg-img" />
        		<a ng-click="vm.sendImage(file)" class="btn btn-primary">Send</a>
			</div>
      </div>
  </script>